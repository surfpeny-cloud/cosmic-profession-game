// ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¸Ð³Ñ€Ñ‹
const GAME_CONFIG = {
    totalStarsToWin: 10,
    totalPlanets: 15,
    timerDuration: 120, // ÑÐµÐºÑƒÐ½Ð´Ñ‹
    minProofLength: 20
};

// Ð¢Ð¸Ð¿Ñ‹ Ð¿Ð»Ð°Ð½ÐµÑ‚
const PLANET_TYPES = {
    blue: {
        name: "ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸",
        color: "#4fc3f7",
        icon: "ðŸ”µ",
        probability: 0.4,
        description: "Ð ÐµÑˆÐ¸ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÑÐ²Ð¾ÐµÐ¹ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¸"
    },
    red: {
        name: "Ð”Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾ÑÑ‚Ð¸", 
        color: "#ff6b6b",
        icon: "ðŸ”´",
        probability: 0.3,
        description: "Ð£Ð±ÐµÐ´Ð¸ Ð¸Ð½Ð¾Ð¿Ð»Ð°Ð½ÐµÑ‚ÑÐ½ Ð² Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾ÑÑ‚Ð¸ Ñ‚Ð²Ð¾ÐµÐ¹ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¸"
    },
    green: {
        name: "ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð´Ñ€ÑƒÐ³Ð¸Ð¼",
        color: "#66bb6a", 
        icon: "ðŸŸ¢",
        probability: 0.2,
        description: "ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð¼Ñƒ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð¼Ñƒ Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ"
    },
    yellow: {
        name: "ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ",
        color: "#ffd54f",
        icon: "ðŸŸ¡", 
        probability: 0.1,
        description: "Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¿Ñ€Ð¸ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ"
    }
};

// Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼
const COSMIC_PROBLEMS = [
    {
        problem: "Ð˜Ð½Ð¾Ð¿Ð»Ð°Ð½ÐµÑ‚ÑÐ½Ðµ Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽÑ‚ Ð·ÐµÐ¼Ð½Ð¾Ðµ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾! ÐžÐ½Ð¸ Ð²Ð¸Ð´ÑÑ‚ Ñ†Ð²ÐµÑ‚Ð° Ð¸Ð½Ð°Ñ‡Ðµ.",
        hint: "ÐÐ°Ð¹Ð´Ð¸ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· ÑƒÐ½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ñ„Ð¾Ñ€Ð¼Ñ‹ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÑ‚Ð²Ð°"
    },
    {
        problem: "ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¶Ð¸Ð²Ð¾Ñ‚Ð½Ñ‹Ðµ Ð³Ñ€ÑƒÑÑ‚ÑÑ‚ Ð² Ð½ÐµÐ²ÐµÑÐ¾Ð¼Ð¾ÑÑ‚Ð¸. ÐžÐ½Ð¸ Ñ‚Ð¾ÑÐºÑƒÑŽÑ‚ Ð¿Ð¾ Ð³Ñ€Ð°Ð²Ð¸Ñ‚Ð°Ñ†Ð¸Ð¸.",
        hint: "ÐŸÑ€Ð¸Ð´ÑƒÐ¼Ð°Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¸Ð¼ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ"
    },
    {
        problem: "Ð Ð¾Ð±Ð¾Ñ‚Ñ‹ Ð½Ð° ÑÑ‚Ð°Ð½Ñ†Ð¸Ð¸ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ ÑÑÐ¾Ñ€ÑÑ‚ÑÑ Ð¸Ð·-Ð·Ð° Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¾Ð² Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ.",
        hint: "ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ Ð¸Ð¼ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¾Ð±Ñ‰Ð¸Ð¹ ÑÐ·Ñ‹Ðº"
    },
    {
        problem: "Ð—Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ ÐºÑ€Ð°ÑÐºÐ¸ Ð´Ð»Ñ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÐºÐ°Ñ€Ñ‚Ð¸Ð½. ÐÑƒÐ¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ñ†Ð²ÐµÑ‚Ð°.",
        hint: "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð¿Ñ‹Ð»ÑŒ Ð¸ ÑÐ½ÐµÑ€Ð³Ð¸ÑŽ Ð·Ð²ÐµÐ·Ð´"
    },
    {
        problem: "Ð­ÐºÐ¸Ð¿Ð°Ð¶ Ð² ÑƒÐ½Ñ‹Ð½Ð¸Ð¸ Ð¿Ð¾ÑÐ»Ðµ Ð´Ð¾Ð»Ð³Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÐµÑ‚Ð°. ÐÑƒÐ¶Ð½Ð¾ Ð¿Ð¾Ð´Ð½ÑÑ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ.",
        hint: "Ð¡Ð¾Ð·Ð´Ð°Ð¹ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð²ÐµÑ€Ð½ÐµÑ‚ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ Ð² ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±Ñ‹Ñ‚"
    },
    {
        problem: "Ð¡Ð»Ð¾Ð¼Ð°Ð»ÑÑ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€ ÑÑ‚Ð°Ð½Ñ†Ð¸Ð¸. Ð’ÑÐµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹.",
        hint: "ÐÐ°Ð¹Ð´Ð¸ Ð½ÐµÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¿Ð¾Ñ‡Ð¸Ð½ÐºÐ¸"
    },
    {
        problem: "ÐŸÐ¾Ñ‚ÐµÑ€ÑÐ»Ð°ÑÑŒ Ð²Ð°Ð¶Ð½Ð°Ñ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÐºÐ°Ñ€Ñ‚Ð° Ñ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð¼ Ðº ÐŸÐ»Ð°Ð½ÐµÑ‚Ðµ ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¹.",
        hint: "Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸ ÐºÐ°Ñ€Ñ‚Ñƒ Ð¿Ð¾ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ð¸Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹ Ð½Ð¾Ð²ÑƒÑŽ"
    },
    {
        problem: "ÐÐ° Ð±Ð¾Ñ€Ñ‚Ñƒ Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ Ð·Ð°Ð¿Ð°ÑÑ‹ Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²ÐµÐ½Ð¸Ñ Ð¸ ÐºÑ€ÐµÐ°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð¸Ð´ÐµÐ¹.",
        hint: "Ð’Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð½Ð¾Ð²Ñ‹Ð¼Ð¸ Ð¿ÐµÑ€ÑÐ¿ÐµÐºÑ‚Ð¸Ð²Ð°Ð¼Ð¸"
    },
    {
        problem: "ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð»Ð¸ Ñ†Ð²ÐµÑÑ‚Ð¸ Ð¾Ñ‚ Ð¾Ð´Ð¸Ð½Ð¾Ñ‡ÐµÑÑ‚Ð²Ð°.",
        hint: "ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ Ð¸Ð¼ ÑÐ½Ð¾Ð²Ð° Ñ€Ð°ÑÑ†Ð²ÐµÑÑ‚Ð¸"
    },
    {
        problem: "Ð˜Ð½Ð¾Ð¿Ð»Ð°Ð½ÐµÑ‚Ð½Ñ‹Ðµ Ð³Ð¾ÑÑ‚Ð¸ Ñ…Ð¾Ñ‚ÑÑ‚ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð¾ Ð·ÐµÐ¼Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸ÑÑ…, Ð½Ð¾ Ð½Ðµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽÑ‚ Ð½Ð°Ñˆ ÑÐ·Ñ‹Ðº.",
        hint: "ÐÐ°Ð¹Ð´Ð¸ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¼ÐµÐ¶Ð³Ð°Ð»Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"
    }
];

// ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ
const COSMIC_EVENTS = [
    {
        type: "positive",
        title: "ÐœÐµÑ‚ÐµÐ¾Ñ€Ð¸Ñ‚Ð½Ñ‹Ð¹ Ð´Ð¾Ð¶Ð´ÑŒ!",
        description: "Ð¢Ñ‹ ÑÑ‚Ð°Ð» ÑÐ²Ð¸Ð´ÐµÑ‚ÐµÐ»ÐµÐ¼ Ð½ÐµÐ²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾Ð³Ð¾ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð·Ñ€ÐµÐ»Ð¸Ñ‰Ð°. Ð’ÑÐµ Ð¸Ð³Ñ€Ð¾ÐºÐ¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÑŽÑ‚ +1 Ð·Ð²ÐµÐ·Ð´Ñƒ Ð·Ð° ÑÐ¼ÐµÐ»Ð¾ÑÑ‚ÑŒ!",
        effect: { stars: 1 }
    },
    {
        type: "challenge", 
        title: "ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²ÐµÑ‚ÐµÑ€!",
        description: "Ð¡Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ¾Ð»Ð½ÐµÑ‡Ð½Ñ‹Ð¹ Ð²ÐµÑ‚ÐµÑ€ ÑÐ±Ð¸Ð» Ñ ÐºÑƒÑ€ÑÐ°! ÐŸÑ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑˆÑŒ Ñ…Ð¾Ð´, Ð½Ð¾ Ð¿Ñ€Ð¸Ð´ÑƒÐ¼Ñ‹Ð²Ð°ÐµÑˆÑŒ Ð½Ð¾Ð²Ð¾Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÑÐ²Ð¾ÐµÐ¹ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¸ Ð² ÑƒÑÐ»Ð¾Ð²Ð¸ÑÑ… Ð½ÐµÐ²ÐµÑÐ¾Ð¼Ð¾ÑÑ‚Ð¸.",
        effect: { skipTurn: true, creativeTask: true }
    },
    {
        type: "positive",
        title: "Ð’ÑÑ‚Ñ€ÐµÑ‡Ð° Ñ Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¼Ð¸ Ð¸Ð½Ð¾Ð¿Ð»Ð°Ð½ÐµÑ‚ÑÐ½Ð°Ð¼Ð¸!",
        description: "ÐžÐ½Ð¸ Ð¿Ð¾Ð´ÐµÐ»Ð¸Ð»Ð¸ÑÑŒ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ð·Ð½Ð°Ð½Ð¸ÑÐ¼Ð¸ Ð¾ Ð³Ð°Ð»Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸ÑÑ…. ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑˆÑŒ +2 Ð·Ð²ÐµÐ·Ð´Ñ‹ Ð·Ð° Ð¼ÐµÐ¶Ð³Ð°Ð»Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð´Ñ€ÑƒÐ¶Ð±Ñƒ!",
        effect: { stars: 2 }
    },
    {
        type: "challenge",
        title: "Ð¡Ð¾Ð»Ð½ÐµÑ‡Ð½Ð°Ñ Ð±ÑƒÑ€Ñ!",
        description: "Ð’ÑÐµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ ÐºÐ¾Ñ€Ð°Ð±Ð»Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹. ÐŸÑ€Ð¸Ð´ÑƒÐ¼Ð°Ð¹, ÐºÐ°Ðº Ñ‚Ð²Ð¾Ñ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ð² ÑÑ‚Ð¾Ð¹ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ð¾Ð¹ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸!",
        effect: { emergencyTask: true }
    },
    {
        type: "positive", 
        title: "ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¼ÐµÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ!",
        description: "Ð¢Ñ‹ Ð½Ð°ÑˆÐµÐ» Ñ€ÐµÐ´ÐºÐ¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¾Ñ‡ÐµÐ½ÑŒ Ñ†ÐµÐ½ÑÑ‚ÑÑ Ð² Ð³Ð°Ð»Ð°ÐºÑ‚Ð¸ÐºÐµ! ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑˆÑŒ +1 Ð·Ð²ÐµÐ·Ð´Ñƒ Ð·Ð° Ð½Ð°Ñ…Ð¾Ð´ÐºÑƒ.",
        effect: { stars: 1 }
    }
];

// ÐÐ°Ð²Ñ‹ÐºÐ¸ Ð¸ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑ‹ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¹
const SKILLS = [
    "Ð Ð¸ÑÐ¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÑ‚Ð²Ð¾", "ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð¸Ð·Ð¾Ð±Ñ€ÐµÑ‚ÐµÐ½Ð¸Ðµ", "ÐÐ°Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ðµ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·",
    "ÐžÐ±Ñ‰ÐµÐ½Ð¸Ðµ Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ð´Ñ€ÑƒÐ³Ð¸Ð¼", "ÐžÑ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¸ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ", "ÐœÑƒÐ·Ñ‹ÐºÐ° Ð¸ Ñ€Ð¸Ñ‚Ð¼",
    "Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð¸ ÑÐ¿Ð¾Ñ€Ñ‚", "ÐŸÑ€Ð¸Ñ€Ð¾Ð´Ð° Ð¸ Ð·Ð°Ð±Ð¾Ñ‚Ð° Ð¾ Ð¶Ð¸Ð²Ð¾Ð¼", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° Ð¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ",
    "Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¸ Ñ€Ð°ÑÑÐºÐ°Ð·Ñ‹Ð²Ð°Ð½Ð¸Ðµ", "Ð­ÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ñ‹ Ð¸ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ", "Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸ Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ"
];

const INTERESTS = [
    "Ð˜ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾ÑÐ¼Ð¾ÑÐ°", "ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¶Ð¸Ð²Ð¾Ñ‚Ð½Ñ‹Ð¼", "Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð°",
    "Ð˜Ð·Ð¾Ð±Ñ€ÐµÑ‚ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼Ð¾Ð²", "Ð˜Ð·ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ñ€Ð¾Ð´Ñ‹", "Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð»ÑŽÐ´ÑŒÐ¼Ð¸",
    "ÐœÑƒÐ·Ñ‹ÐºÐ° Ð¸ Ð·Ð²ÑƒÐºÐ¸", "Ð¡Ð¿Ð¾Ñ€Ñ‚ Ð¸ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ", "ÐÐ°ÑƒÐºÐ° Ð¸ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ", 
    "Ð¢ÐµÑ…Ð½Ð¸ÐºÐ° Ð¸ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ñ‹", "ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½Ð° Ð¸ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ", "Ð•Ð´Ð° Ð¸ ÐºÑƒÐ»Ð¸Ð½Ð°Ñ€Ð¸Ñ"
];

// Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¹
const PROFESSION_TEMPLATES = [
    "ÐšÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ {specialty} {domain}",
    "Ð—Ð²ÐµÐ·Ð´Ð½Ñ‹Ð¹ {domain} {specialty}",
    "Ð“Ð°Ð»Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ {specialty} Ð¿Ð¾ {domain}",
    "ÐŸÐ»Ð°Ð½ÐµÑ‚Ð°Ñ€Ð½Ñ‹Ð¹ {domain} {specialty}",
    "ÐœÐµÐ¶Ð³Ð°Ð»Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ {specialty} {domain}",
    "ÐžÑ€Ð±Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ {domain} {specialty}"
];

const SPECIALTIES = [
    "Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ", "ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ", "Ñ…ÑƒÐ´Ð¾Ð¶Ð½Ð¸Ðº", "Ð¸Ð½Ð¶ÐµÐ½ÐµÑ€", "Ð²Ñ€Ð°Ñ‡", "ÑÐ°Ð´Ð¾Ð²Ð½Ð¸Ðº",
    "Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚Ð¾Ñ€", "Ð¿Ð¾Ð²Ð°Ñ€", "Ñ‚Ñ€ÐµÐ½ÐµÑ€", "ÑƒÑ‡ÐµÐ½Ñ‹Ð¹", "Ð´Ð¸Ð·Ð°Ð¹Ð½ÐµÑ€", "Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº"
];

// Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸
const HELP_MESSAGES = [
    "ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð¼Ñƒ Ð¸Ð³Ñ€Ð¾ÐºÑƒ Ð¿Ñ€Ð¸Ð´ÑƒÐ¼Ð°Ñ‚ÑŒ ÐºÑ€ÐµÐ°Ñ‚Ð¸Ð²Ð½Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ ÐµÐ³Ð¾ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡Ð¸",
    "ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸ Ð¸Ð´ÐµÑŽ, ÐºÐ°Ðº Ñ‚Ð²Ð¾Ñ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸ÑŽ Ñ‚Ð¾Ð²Ð°Ñ€Ð¸Ñ‰Ð°",
    "ÐÐ°Ñ€Ð¸ÑÑƒÐ¹ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð¼ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹",
    "ÐžÐ±ÑŠÑÑÐ½Ð¸, ÐºÐ°Ðº Ð²Ð°Ñˆ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð²Ð¼ÐµÑÑ‚Ðµ Ð² ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¼Ð¸ÑÑÐ¸Ð¸",
    "Ð¡Ð¾Ð·Ð´Ð°Ð¹ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼ Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼"
];

// Ð“ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ð¾Ð»Ñ
function generateGameBoard(numPlanets = GAME_CONFIG.totalPlanets) {
    const planets = [];
    
    // Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ
    planets.push({
        position: 0,
        type: 'start',
        name: 'Ð¡Ð¢ÐÐ Ð¢',
        color: '#10b981',
        icon: 'ðŸš€',
        description: 'ÐÐ°Ñ‡Ð°Ð»Ð¾ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ'
    });
    
    // Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¿Ð»Ð°Ð½ÐµÑ‚ Ñ ÑƒÑ‡ÐµÑ‚Ð¾Ð¼ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÐµÐ¹
    const planetTypes = Object.keys(PLANET_TYPES);
    const probabilities = planetTypes.map(type => PLANET_TYPES[type].probability);
    
    for (let i = 1; i <= numPlanets; i++) {
        const random = Math.random();
        let cumulativeProbability = 0;
        let selectedType = 'blue'; // fallback
        
        for (let j = 0; j < probabilities.length; j++) {
            cumulativeProbability += probabilities[j];
            if (random <= cumulativeProbability) {
                selectedType = planetTypes[j];
                break;
            }
        }
        
        const planetType = PLANET_TYPES[selectedType];
        planets.push({
            position: i,
            type: selectedType,
            name: `ÐŸÐ»Ð°Ð½ÐµÑ‚Ð° ${i}`,
            color: planetType.color,
            icon: planetType.icon,
            description: planetType.description
        });
    }
    
    // Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð»Ð°Ð½ÐµÑ‚Ð°
    planets.push({
        position: numPlanets + 1,
        type: 'finish',
        name: 'ÐŸÐ›ÐÐÐ•Ð¢Ð ÐŸÐ ÐžÐ¤Ð•Ð¡Ð¡Ð˜Ð™',
        color: '#f59e0b',
        icon: 'ðŸ†',
        description: 'ÐšÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ Ñ†ÐµÐ»ÑŒ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ',
        isWin: true
    });
    
    return planets;
}

// Ð“ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¹
function generateProfession(skill, interest) {
    const template = PROFESSION_TEMPLATES[Math.floor(Math.random() * PROFESSION_TEMPLATES.length)];
    const specialty = SPECIALTIES[Math.floor(Math.random() * SPECIALTIES.length)];
    
    return template
        .replace('{specialty}', specialty)
        .replace('{domain}', interest.toLowerCase());
}

// Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹
function getRandomProblem() {
    const problem = COSMIC_PROBLEMS[Math.floor(Math.random() * COSMIC_PROBLEMS.length)];
    return `${problem.problem}\n\nðŸ’¡ ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ°: ${problem.hint}`;
}

function getRandomEvent() {
    return COSMIC_EVENTS[Math.floor(Math.random() * COSMIC_EVENTS.length)];
}

function getRandomHelpMessage() {
    return HELP_MESSAGES[Math.floor(Math.random() * HELP_MESSAGES.length)];
}

function getRandomSkill() {
    return SKILLS[Math.floor(Math.random() * SKILLS.length)];
}

function getRandomInterest() {
    return INTERESTS[Math.floor(Math.random() * INTERESTS.length)];
}

// Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² game.js
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        GAME_CONFIG,
        PLANET_TYPES,
        generateGameBoard,
        generateProfession,
        getRandomProblem,
        getRandomEvent,
        getRandomHelpMessage,
        getRandomSkill,
        getRandomInterest
    };
}
